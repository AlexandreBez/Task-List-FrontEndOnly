<app-loading *ngIf="isLoading"></app-loading>

<!-- delete all tasks modal -->
<div *ngIf="deleteAll">
    <div class="modalAux">
        <svg xmlns="http://www.w3.org/2000/svg" style="margin-left: 30%; margin-bottom: 5%;" width="100" height="100" fill="currentColor" class="bi bi-question-square" viewBox="0 0 16 16">
            <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
            <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
        </svg>
        <br>
        <span>You really want to delete all tasks?</span>
        <hr>
        <button class="btn btn-danger modal-button" (click)="OnDeleteAll()">
            Confirm
        </button>
        <button class="btn btn-info modal-button" (click)="deleteAll = false">
            Cancel
        </button>    
    </div>
    <div class="overlay">
    </div>
</div>

<!-- delete task modal -->
<div *ngIf="deleteTask">
    <div class="modalAux">
        <svg xmlns="http://www.w3.org/2000/svg" style="margin-left: 30%; margin-bottom: 5%;" width="100" height="100" fill="currentColor" class="bi bi-question-square" viewBox="0 0 16 16">
            <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h12zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2H2z"/>
            <path d="M5.255 5.786a.237.237 0 0 0 .241.247h.825c.138 0 .248-.113.266-.25.09-.656.54-1.134 1.342-1.134.686 0 1.314.343 1.314 1.168 0 .635-.374.927-.965 1.371-.673.489-1.206 1.06-1.168 1.987l.003.217a.25.25 0 0 0 .25.246h.811a.25.25 0 0 0 .25-.25v-.105c0-.718.273-.927 1.01-1.486.609-.463 1.244-.977 1.244-2.056 0-1.511-1.276-2.241-2.673-2.241-1.267 0-2.655.59-2.75 2.286zm1.557 5.763c0 .533.425.927 1.01.927.609 0 1.028-.394 1.028-.927 0-.552-.42-.94-1.029-.94-.584 0-1.009.388-1.009.94z"/>
        </svg>
        <br>
        <span>You really want to delete the task?</span>
        <hr>
        <button class="btn btn-danger modal-button" (click)="onDeleteTask()">
            Confirm
        </button>
        <button class="btn btn-info modal-button" (click)="deleteTask = false">
            Cancel
        </button>    
    </div>
    <div class="overlay">
    </div>
</div>

<button class="btn btn-danger mt-2" (click)="OnConfirmDeleteAll()">
    <i class="bi bi-trash"></i>
    Clear List
</button>


<table class="table table-dark table-hover align-item-center mt-1" *ngIf="!isLoading">
    <thead>
        <tr>
            <th scope="col">
                <i class="bi bi-clipboard"></i>
                Task
            </th>
            <th scope="col">
                <i class="bi bi-clipboard-data"></i>
                Type
            </th>
            <th scope="col">
                <i class="bi bi-calendar-week"></i>
                Creation Date
            </th>
            <th>
                <i class="bi bi-pencil"></i>
                Update
            </th>
            <th>
                <i class="bi bi-clipboard2-x"></i>
                Remove
            </th>
        </tr>
    </thead>

    <tbody>
        <tr class="align-text-center takeOutBorder" *ngFor="let task of tasks;let i = index" appBorderTask="1.5px solid grey" appUnderlineTask >
    
            <td>
                {{ task.task }}
            </td>
    
            <!-- tasks types -->
            <td *ngIf="task.type === 'Low'">
                <span class="badge rounded-pill bg-success">
                    {{ task.type | uppercase }}
                </span>
            </td>
    
            <td *ngIf="task.type === 'Medium'">
                <span class="badge rounded-pill bg-warning">
                    {{ task.type | uppercase }}
                </span>
            </td>
    
            <td *ngIf="task.type === 'High'">
                <span class="badge rounded-pill bg-danger">
                    {{ task.type | uppercase }}
                </span>
            </td>
    
            <td>
                {{ task.date }}
            </td>
    
            <td>
                <button class="btn btn-primary helperBtn" (click)="OnUpdateTask(i)">
                    <i class="bi bi-pencil-square"></i>
                </button>
            </td>
    
            <td>
                <button class="btn btn-danger helperBtn" (click)="OnConfirmRemove(i)">
                    <i class="bi bi-trash"></i>
                </button>
            </td>
        </tr>
    </tbody>
</table>